(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e,t,s){},52:function(e,t,s){},73:function(e,t,s){"use strict";s.r(t);var n=s(1),o=s.n(n),a=s(10),r=s.n(a),c=(s(52),s(19)),i=(s(23),s(24)),l=s(6),d=s(7),u=s(9),p=s(8),m=s(0),j=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(m.jsx)("div",{className:this.props.classes,children:Object(m.jsx)("button",{className:"btn",type:this.props.type,disabled:this.props.disabled,onClick:this.props.onClick,children:this.props.text})})}}]),s}(o.a.Component),h=s(13),b=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).onChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=JSON.stringify(n.state);fetch("/api/login/",{method:"POST",body:t,headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return n.props.history.push("/feed");var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},n.state={username:"",password:""},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("form",{onSubmit:this.onSubmit,className:"auth-form input",children:["Login",Object(m.jsx)("input",{name:"username",type:"text",placeholder:"Username",onChange:this.onChange}),Object(m.jsx)("input",{name:"password",type:"password",placeholder:"Password",onChange:this.onChange}),Object(m.jsx)(j,{type:"submit",classes:"submit-button-padding",text:"Login"}),Object(m.jsx)(h.b,{to:"/register",children:Object(m.jsx)(j,{type:"submit",classes:"submit-button-padding",text:"Register"})}),Object(m.jsx)("div",{id:"post-response-errors"})]})}}]),s}(o.a.Component),O=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).onChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=JSON.stringify(n.state);fetch("/api/register/",{method:"POST",body:t,headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return n.props.history.push("/feed");var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},n.state={username:"",password:"",password2:""},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("form",{onSubmit:this.onSubmit,className:"auth-form input",children:["Sign up",Object(m.jsx)("input",{name:"username",type:"text",placeholder:"Username",onChange:this.onChange}),Object(m.jsx)("input",{name:"password",type:"password",placeholder:"Password",onChange:this.onChange}),Object(m.jsx)("input",{name:"password2",type:"password",placeholder:"Repeat Password",onChange:this.onChange}),Object(m.jsx)(j,{type:"submit",classes:"submit-button-padding",text:"Register"}),Object(m.jsx)("div",{id:"post-response-errors"})]})}}]),s}(o.a.Component),f=s(18),x=s(11),v=s(27),g=s.n(v),S=s(87),w=s(88),C=s(21),y=s(22);function N(e){var t=null;if(document.cookie&&""!==document.cookie)for(var s=document.cookie.split(";"),n=0;n<s.length;n++){var o=s[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}function R(e){var t=e.username,s=e.comment;return Object(m.jsxs)("div",{className:"comment-box",children:[Object(m.jsx)(w.a,{className:"comment-avatar",alt:t,src:""}),Object(m.jsxs)("div",{className:"mr-auto",children:[Object(m.jsx)("p",{className:"comment-box-username",children:t}),Object(m.jsx)("p",{className:"comment-box-text",children:s})]})]})}var M=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).handleNewCommentChange=function(e){n.setState({newComment:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.append("post",n.props.id),t.append("content",n.state.newComment);var s=N("csrftoken");fetch("/api/comment/",{method:"POST",body:JSON.stringify(Object.fromEntries(t)),headers:{"content-type":"application/json","X-CSRFToken":s}}).then((function(e){return e.json()})).then((function(e){if("true"!==e.success){var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)}else{n.setState({newComment:""});var o=document.getElementById("comments-comment-container");n.props.comments.push(e.comment);var a=n.props.comments.map((function(e){return Object(m.jsx)(R,{username:e.username,comment:e.content})}));r.a.render(a,o)}})).catch((function(e){return console.log(e)}))},n.state={newComment:""},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"comments-card",children:[Object(m.jsx)("img",{className:"comments-image",src:this.props.image,alt:""}),Object(m.jsxs)("div",{className:"comments-content",children:[Object(m.jsxs)("div",{className:"comments-header",children:[Object(m.jsx)(w.a,{className:"comments-avatar",alt:this.props.username,src:""}),Object(m.jsx)("p",{className:"",children:this.props.username}),Object(m.jsx)(C.a,{icon:y.c,className:"comments-close ml-auto",onClick:this.props.handleDisableShowComments})]}),Object(m.jsx)("div",{id:"comments-comment-container",children:this.props.comments.map((function(e){return Object(m.jsx)(R,{username:e.username,comment:e.content})}))}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"comments-form",children:[Object(m.jsx)("textarea",{value:this.state.newComment,onChange:this.handleNewCommentChange,className:"comments-form-textarea",name:"new-comment",placeholder:"Add a new comment to this post..."}),Object(m.jsx)(j,{type:"submit",text:"Add Comment",classes:"comments-form-btn"}),Object(m.jsx)("div",{id:"post-response-errors"})]})]})]})}}]),s}(o.a.Component),k=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).handleNewReportChange=function(e){n.setState({newReport:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.append("post",n.props.id),t.append("content",n.state.newReport);var s=N("csrftoken");fetch("/api/report/",{method:"POST",body:JSON.stringify(Object.fromEntries(t)),headers:{"content-type":"application/json","X-CSRFToken":s}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return n.props.history.push("/");var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},n.state={newReport:""},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"report-card",children:[Object(m.jsx)("img",{className:"report-image",src:this.props.image,alt:""}),Object(m.jsxs)("div",{className:"report-content",children:[Object(m.jsxs)("div",{className:"report-header",children:[Object(m.jsx)(w.a,{className:"report-avatar",alt:this.props.username,src:""}),Object(m.jsxs)("p",{className:"",children:[this.props.username,": ",this.props.caption]}),Object(m.jsx)(C.a,{icon:y.c,className:"report-close ml-auto",onClick:this.props.handleDisableShowReport})]}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"report-form",children:[Object(m.jsx)("textarea",{value:this.state.newReport,onChange:this.handleNewReportChange,className:"report-form-textarea",name:"new-report",placeholder:"Explain your reason for this report..."}),Object(m.jsx)(j,{type:"submit",text:"Submit Report",classes:"report-form-btn"}),Object(m.jsx)("div",{id:"post-response-errors"})]})]})]})}}]),s}(o.a.Component);function D(e){var t=e.id,s=e.username,n=e.caption,o=e.image,a=e.comments,r=e.handleEnableShowComments,c=e.handleEnableShowReport,i=e.index;return Object(m.jsxs)("div",{className:"post-card",children:[Object(m.jsxs)("div",{className:"post-header",children:[Object(m.jsx)(w.a,{className:"post-avatar",alt:s,src:""}),Object(m.jsx)("p",{className:"post-username",children:s}),Object(m.jsx)(C.a,{icon:y.b,className:"post-report-button ml-auto",onClick:function(){return c(t,s,o,n)}})]}),Object(m.jsx)("img",{className:"post-image",src:o,alt:""}),Object(m.jsxs)("div",{className:"post-bottom-section",children:[Object(m.jsxs)("p",{className:"post-text mr-auto",children:[Object(m.jsxs)("strong",{children:[s,":"]})," ",n]}),Object(m.jsx)(C.a,{icon:y.a,className:"post-comments-button ml-auto",onClick:function(){return r(t,s,o,a)}})]})]},i)}var E=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).enableShowCommentsModal=function(e,t,s,o){var a=Object(f.a)(Object(f.a)({},n.state.commentsModalState),{},{postId:e,postUsername:t,postImage:s,commentData:o});n.setState({commentsModalState:a}),n.setState({showCommentsModal:!0})},n.disableShowCommentsModal=function(){n.setState({showCommentsModal:!1})},n.enableShowReportModal=function(e,t,s,o){var a=Object(f.a)(Object(f.a)({},n.state.reportModalState),{},{postId:e,postUsername:t,postImage:s,postCaption:o});n.setState({reportModalState:a}),n.setState({showReportModal:!0})},n.disableShowReportModal=function(){n.setState({showReportModal:!1})},n.state={postData:[],showCommentsModal:!1,showReportModal:!1,commentsModalState:{postId:"",postUsername:"",postImage:"",commentData:[]},reportModalState:{postId:"",postCaption:"",postUsername:"",postImage:""}},n.enableShowCommentsModal=n.enableShowCommentsModal.bind(Object(x.a)(n)),n.disableShowCommentsModal=n.disableShowCommentsModal.bind(Object(x.a)(n)),n.enableShowReportModal=n.enableShowReportModal.bind(Object(x.a)(n)),n.disableShowReportModal=n.disableShowReportModal.bind(Object(x.a)(n)),n.fetchPosts=n.fetchPosts.bind(Object(x.a)(n)),n}return Object(d.a)(s,[{key:"fetchPosts",value:function(){var e=this;fetch("/api/feed/",{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.setState({postData:t})}))}},{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var e=this,t=this.state.postData;return Object(m.jsxs)("div",{children:[Object(m.jsx)(S.a,{id:"feed-grid",container:!0,direction:"column",justify:"space-between",alignItems:"center",children:t.map((function(t,s){return Object(m.jsx)(D,{id:t.id,username:t.username,caption:t.caption,image:t.image,comments:t.comments,handleEnableShowComments:e.enableShowCommentsModal,handleEnableShowReport:e.enableShowReportModal},s)}))}),Object(m.jsx)(g.a,{isOpen:this.state.showCommentsModal,contentLabel:"Post Comments Section",shouldCloseOnOverlayClick:!0,shoudCloseOnEsc:!0,className:"modal-container",onRequestClose:this.disableShowCommentsModal,children:Object(m.jsx)(M,{id:this.state.commentsModalState.postId,username:this.state.commentsModalState.postUsername,image:this.state.commentsModalState.postImage,comments:this.state.commentsModalState.commentData,handleDisableShowComments:this.disableShowCommentsModal})}),Object(m.jsx)(g.a,{isOpen:this.state.showReportModal,contentLabel:"Post Report Section",shouldCloseOnOverlayClick:!0,shoudCloseOnEsc:!0,className:"modal-container",onRequestClose:this.disableShowReportModal,children:Object(m.jsx)(k,{id:this.state.reportModalState.postId,caption:this.state.reportModalState.postCaption,username:this.state.reportModalState.postUsername,image:this.state.reportModalState.postImage,handleDisableShowReport:this.disableShowReportModal})})]})}}]),s}(o.a.Component);function I(e){var t=e.report,s=e.username,n=e.id,o=e.handleDismissReport;return Object(m.jsxs)("div",{className:"report-box",children:[Object(m.jsx)(w.a,{className:"report-avatar",alt:s,src:""}),Object(m.jsxs)("div",{className:"mr-auto",children:[Object(m.jsx)("p",{className:"report-box-username",children:s}),Object(m.jsxs)("p",{className:"report-box-text",children:["Content: ",t]}),Object(m.jsx)(j,{type:"submit",text:"Dismiss",classes:"report-form-btn",onClick:function(){return o(n)}})]})]})}var P=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).deletePost=function(e){e.preventDefault();var t=new FormData;t.append("id",n.props.id);var s=N("csrftoken");fetch("/api/feed/",{method:"DELETE",body:JSON.stringify(Object.fromEntries(t)),headers:{"content-type":"application/json","X-CSRFToken":s}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return n.push("/");var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},n.dismissReport=function(e){var t=new FormData;t.append("id",e);var s=N("csrftoken");fetch("/api/report/",{method:"DELETE",body:JSON.stringify(Object.fromEntries(t)),headers:{"content-type":"application/json","X-CSRFToken":s}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return n.props.history.push("/");var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},n.state={newReport:""},n.dismissReport=n.dismissReport.bind(Object(x.a)(n)),n}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"report-card",children:[Object(m.jsx)("img",{className:"report-image",src:this.props.image,alt:""}),Object(m.jsxs)("div",{className:"report-content",children:[Object(m.jsx)("div",{className:"report-header",children:Object(m.jsx)(j,{type:"submit",text:"Delete Post",classes:"report-form-btn",onClick:this.deletePost})}),Object(m.jsx)("div",{id:"reports-report-container",children:this.props.reports.map((function(t){return Object(m.jsx)(I,{id:t.id,report:t.content,username:t.username,handleDismissReport:e.dismissReport})}))})]})]})}}]),s}(o.a.Component);function F(e){var t=e.id,s=e.username,n=e.caption,o=e.image,a=e.report,r=e.handleEnableShowReports,c=e.index;return Object(m.jsxs)("div",{className:"post-card",children:[Object(m.jsxs)("div",{className:"post-header",children:[Object(m.jsx)(w.a,{className:"post-avatar",alt:s,src:""}),Object(m.jsx)("p",{className:"post-username",children:s})]}),Object(m.jsx)("img",{className:"post-image",src:o,alt:""}),Object(m.jsxs)("div",{className:"post-bottom-section",children:[Object(m.jsxs)("p",{className:"post-text mr-auto",children:[Object(m.jsxs)("strong",{children:[s,":"]})," ",n]}),Object(m.jsx)(C.a,{icon:y.b,className:"post-reports-button ml-auto",onClick:function(){return r(t,s,o,a)}})]})]},c)}var U=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).enableShowReportsModal=function(e,t,s,o){var a=Object(f.a)(Object(f.a)({},n.state.reportsModalState),{},{postId:e,postUsername:t,postImage:s,reportData:o});n.setState({reportsModalState:a}),n.setState({showReportsModal:!0})},n.disableShowReportsModal=function(){n.setState({showReportsModal:!1})},n.state={postData:[],showReportsModal:!1,reportsModalState:{postId:"",postUsername:"",postImage:"",reportData:[]},isError:!1,errors:""},n.enableShowReportsModal=n.enableShowReportsModal.bind(Object(x.a)(n)),n.disableShowReportsModal=n.disableShowReportsModal.bind(Object(x.a)(n)),n.fetchPosts=n.fetchPosts.bind(Object(x.a)(n)),n}return Object(d.a)(s,[{key:"fetchPosts",value:function(){var e=this;fetch("/api/report/",{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){null===t.errors||void 0===t.errors?e.setState({postData:t}):(e.setState({isError:!0}),e.setState({errors:t.errors}))})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var e=this,t=this.state.postData;return this.state.isError?Object(m.jsx)("h1",{children:this.state.errors}):Object(m.jsxs)("div",{children:[Object(m.jsx)(S.a,{id:"feed-grid",container:!0,direction:"column",justify:"space-between",alignItems:"center",children:t.map((function(t,s){return Object(m.jsx)(F,{id:t.id,username:t.username,caption:t.caption,image:t.image,report:t.reports,handleEnableShowReports:e.enableShowReportsModal},s)}))}),Object(m.jsx)(g.a,{isOpen:this.state.showReportsModal,contentLabel:"Post Reports Section",shouldCloseOnOverlayClick:!0,shoudCloseOnEsc:!0,className:"modal-container",onRequestClose:this.disableShowReportsModal,children:Object(m.jsx)(P,{id:this.state.reportsModalState.postId,username:this.state.reportsModalState.postUsername,image:this.state.reportsModalState.postImage,reports:this.state.reportsModalState.reportData,handleDisableShowReports:this.disableShowReportsModal})})]})}}]),s}(o.a.Component),A=s(5);var T=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),s=t[0],o=t[1],a=Object(n.useState)(!1),i=Object(c.a)(a,2),l=i[0],d=i[1],u=Object(n.useState)(""),p=Object(c.a)(u,2),j=p[0],h=p[1],b=Object(A.g)();return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("image",s),t.append("caption",j);var n=N("csrftoken");fetch("/api/post/",{method:"POST",body:JSON.stringify(Object.fromEntries(t)),headers:{"content-type":"application/json","X-CSRFToken":n}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return b.push("/feed");var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},className:"post-form-main",children:[Object(m.jsx)("h3",{children:"Make a Post"}),Object(m.jsx)("div",{className:"box-upload",children:l?Object(m.jsxs)("div",{className:"image-preview",children:[Object(m.jsx)("img",{className:"close-icon",src:"https://cdn.iconscout.com/icon/free/png-256/close-1781207-1518581.png",alt:"Close Icon",onClick:function(){d(!1),o(null)}}),Object(m.jsx)("img",{id:"uploaded-image",src:s,alt:"Feed Post",draggable:!1})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("label",{className:"img-label",htmlFor:"upload-input",children:[Object(m.jsx)("img",{style:{width:100},draggable:!1,src:"https://wayou.gallerycdn.vsassets.io/extensions/wayou/vscode-icons-mac/7.25.3/1564717968649/Microsoft.VisualStudio.Services.Icons.Default",alt:"Folder Icon"}),Object(m.jsx)("p",{id:"sub",children:"Click to upload image"})]}),Object(m.jsx)("input",{className:"img-input",id:"upload-input",type:"file",accept:".jpg, .img, .png",onChange:function(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){o(e.target.result),d(!0)},t.readAsDataURL(e.target.files[0])}}})]})}),Object(m.jsx)("div",{className:"text-area",children:Object(m.jsx)("textarea",{value:j,onChange:function(e){h(e.target.value)},type:"text",name:"caption",className:"description-input",placeholder:"Description"})}),Object(m.jsx)("input",{className:"post-btn",type:"submit",value:"Post"}),Object(m.jsx)("div",{id:"post-response-errors"})]})};function L(e){var t=e.username,s=Object(n.useState)(!1),o=Object(c.a)(s,2),a=o[0],i=o[1],l=Object(n.useState)("Follow"),d=Object(c.a)(l,2),u=d[0],p=d[1],j=Object(n.useState)("follow-node"),h=Object(c.a)(j,2),b=h[0],O=h[1];return Object(m.jsxs)("div",{className:b,children:[Object(m.jsx)("p",{children:t}),Object(m.jsx)("button",{onClick:function(){var e=N("csrftoken"),s=new FormData;s.append("user_to_follow",t),fetch("/api/follow/",{method:"POST",body:JSON.stringify(Object.fromEntries(s)),headers:{"content-type":"application/json","X-CSRFToken":e}}).then((function(e){return e.json()})).then((function(e){if("true"===e.success)return i(!0),p("Following!"),void O(b.concat(" follow-node-clicked"));var t=function(){return Object(m.jsx)("ul",{children:e.errors.map((function(e){return Object(m.jsxs)("li",{children:[" ",e," "]},e)}))})},s=document.getElementById("post-response-errors");s.classList.remove("display-none"),r.a.render(Object(m.jsx)(t,{}),s)})).catch((function(e){return console.log(e)}))},disabled:a,className:"follow-button",children:u})]})}var B=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={followUserData:[]},n.fetchFollowUsers=n.fetchFollowUsers.bind(Object(x.a)(n)),n}return Object(d.a)(s,[{key:"fetchFollowUsers",value:function(){var e=this;fetch("/api/follow/",{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.setState({followUserData:t})}))}},{key:"componentDidMount",value:function(){this.fetchFollowUsers()}},{key:"render",value:function(){var e=this.state.followUserData;return Object(m.jsxs)("div",{className:"user-grid",children:[e.map((function(e,t){return Object(m.jsx)(L,{username:e.username})})),Object(m.jsx)("div",{id:"post-response-errors",className:"display-none"})]})}}]),s}(o.a.Component);var J=function(){var e=Object(A.g)();return Object(m.jsx)(j,{onClick:function(){return function(t){var s=N("csrftoken");fetch("/api/logout/",{method:"POST",body:"",headers:{"content-type":"application/json","X-CSRFToken":s}}).then((function(e){return e.json()})).then((function(t){return"true"===t.success?e.push("/login"):e.push("/feed")})).catch((function(e){return console.log(e)}))}()},text:"Logout"})};var X=function(e){var t=Object(A.h)();return Object(n.useLayoutEffect)((function(){var t;t=function(t){e.setIsAuthenticated(t)},fetch("/api/getauth/",{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(!("AnonymousUser"===e.user&&"None"===e.auth))})).catch((function(e){return console.log(e)}))}),[t,e]),Object(m.jsx)("div",{className:"navbar-container",children:Object(m.jsxs)("div",{className:"navbar",children:[Object(m.jsx)(h.b,{to:"/feed",className:"logo mr-auto",children:"SnowFlake"}),e.isAuthenticated?Object(m.jsxs)("div",{className:"user-status ml-auto",children:[Object(m.jsx)(h.b,{to:"/post",children:Object(m.jsx)(j,{text:"New Post"})}),Object(m.jsx)(h.b,{to:"/follow",children:Object(m.jsx)(j,{text:"Follow Finder"})}),Object(m.jsx)(J,{})]}):Object(m.jsxs)("div",{className:"user-status ml-auto",children:[Object(m.jsx)(h.b,{to:"/login",children:Object(m.jsx)(j,{text:"Login"})}),Object(m.jsx)(h.b,{to:"/register",children:Object(m.jsx)(j,{text:"Register"})})]})]})})},G=s(46),q=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"componentWillReceiveProps",value:function(e,t){this.props.isAuthenticated!==e.isAuthenticated&&this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,s=e.redirect,n=Object(G.a)(e,["isAuthenticated","redirect"]);return t?Object(m.jsx)(A.b,Object(f.a)({},n)):Object(m.jsx)(A.a,{to:s})}}]),s}(o.a.Component);var _=function(){var e=Object(n.useState)(!0),t=Object(c.a)(e,2),s=t[0],o=t[1],a=Object(n.useCallback)((function(e){o(e)}),[o]);return Object(m.jsx)(h.a,{children:Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(X,{isAuthenticated:s,setIsAuthenticated:a}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)(A.d,{children:[Object(m.jsx)(q,{path:"/login",component:b,isAuthenticated:!s,redirect:"/feed"}),Object(m.jsx)(q,{path:"/register",component:O,isAuthenticated:!s,redirect:"/feed"}),Object(m.jsx)(q,{path:"/feed",component:E,isAuthenticated:s,redirect:"/login"}),Object(m.jsx)(q,{path:"/post",component:T,isAuthenticated:s,redirect:"/login"}),Object(m.jsx)(q,{path:"/follow",component:B,isAuthenticated:s,redirect:"/login"}),Object(m.jsx)(q,{path:"/report",component:U,isAuthenticated:s,redirect:"/login"})]})})]})})};r.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(h.a,{children:Object(m.jsx)(_,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.1d8a6cf7.chunk.js.map